webpackJsonp([8,7],[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=n(8),s=o(i),a=n(50),r=o(a),u=n(72),l=o(u),c=n(73),f=o(c),d=n(1),m=(o(d),n(7)),p=(o(m),n(64)),h=o(p),v=n(68),g=(o(v),n(66)),w=o(g);n(39),s.default.use(r.default),s.default.use(l.default),s.default.use(f.default),window.sessionStorage.user&&w.default.dispatch("setUserInfo",JSON.parse(window.sessionStorage.user)),window.sessionStorage.info&&w.default.dispatch("setNotiNum",window.sessionStorage.info);var _=new f.default({mode:"history",routes:h.default});_.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.requiresAuth})?w.default.state.user.userInfo.userId?n():n({path:"/login",query:{redirect:t.fullPath}}):n()}),new s.default({router:_,store:w.default}).$mount("#app")},,,,function(t,e,n){var o,i;n(31),o=n(54);var s=n(42);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),"undefined"==typeof i.name&&(i.name="mhead"),i.render=s.render,i.staticRenderFns=s.staticRenderFns,t.exports=o},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getTimeStr=e.getTabInfo=void 0;var i=n(71),s=o(i),a=function(t,e,n,o){var i="",s="";if(n)i="置顶",s="top";else if(e)i="精华",s="good";else switch(t){case"share":i="分享",s="share";break;case"ask":i="问答",s="ask";break;case"job":i="招聘",s="job";break;default:i="暂无",s="default"}return o?s:i},r=function(t){var e=new s.default,n=e.format(t,"zh_CN");return n};e.getTabInfo=a,e.getTimeStr=r},function(t,e,n){t.exports=n.p+"static/img/loading.00839a0.gif"},function(t,e,n){var o,i;n(37),o=n(60);var s=n(48);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),"undefined"==typeof i.name&&(i.name="list"),i.render=s.render,i.staticRenderFns=s.staticRenderFns,t.exports=o},,function(t,e,n){var o,i;n(35),o=n(55);var s=n(46);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),"undefined"==typeof i.name&&(i.name="toTop"),i.render=s.render,i.staticRenderFns=s.staticRenderFns,i._scopeId="data-v-9025a974",t.exports=o},,,,,,,,,,,,,,,,,,,,,,function(t,e){},,,,function(t,e){},,function(t,e){},,function(t,e){},,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[t.theme?n("mu-appbar",{attrs:{title:t.theme,id:"topic"}},[n("mu-icon-button",{attrs:{icon:"menu"},on:{click:function(e){t.toggle(!0)}},slot:"left"}),t._v(" "),n("mu-icon-button",{attrs:{icon:"add"},slot:"right"})],1):t._e(),t._v(" "),t.theme?t._e():n("mu-appbar",{attrs:{title:t.title,id:"topic"}},[n("mu-icon-button",{attrs:{icon:"menu"},on:{click:function(e){t.toggle(!0)}},slot:"left"}),t._v(" "),n("mu-icon-button",{attrs:{icon:"add"},slot:"right"})],1),t._v(" "),n("router-link",{staticStyle:{width:"50px",height:"50px",position:"absolute",right:"0",top:"0","z-index":"555"},attrs:{to:{name:"add"}}}),t._v(" "),n("mu-drawer",{attrs:{open:t.open,docked:t.docked},on:{close:function(e){t.toggle()}}},[n("mu-list",{on:{itemClick:function(e){t.docked?"":t.toggle()}}},[t.userInfo.loginname?t._e():n("router-link",{attrs:{to:{name:"login"}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"登陆"}},[n("mu-icon",{attrs:{value:"person_outline"},slot:"left"})],1)],1),t._v(" "),t.userInfo.loginname?[n("router-link",{attrs:{to:{name:"user",params:{loginname:t.userInfo.loginname}}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:t.userInfo.loginname}},[n("mu-icon",{attrs:{value:"person"},slot:"left"})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"info"}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"消息"}},[n("mu-icon",{attrs:{value:"warning"},slot:"left"}),t._v(" "),n("mu-badge",{attrs:{content:this.$store.state.info.notiNum,primary:this.$store.state.info.notiNum>0,circle:""},slot:"after"})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"collection"}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"收藏"}},[n("mu-icon",{attrs:{value:"grade"},slot:"left"})],1)],1),t._v(" "),n("mu-list-item",{attrs:{title:"退出"},on:{click:t.loginOut}},[n("mu-icon",{attrs:{value:"undo"},slot:"left"})],1)]:t._e(),t._v(" "),n("mu-divider"),t._v(" "),n("router-link",{attrs:{to:{name:"list",query:{tab:"all"}}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"全部"},on:{click:function(e){t.channel("全部")}}},[n("mu-icon",{attrs:{value:"list"},slot:"left"})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"list",query:{tab:"good"}}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"精华"},on:{click:function(e){t.channel("精华")}}},[n("mu-icon",{attrs:{value:"thumb_up"},slot:"left"})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"list",query:{tab:"share"}}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"分享"},on:{click:function(e){t.channel("分享")}}},[n("mu-icon",{attrs:{value:"share"},slot:"left"})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"list",query:{tab:"ask"}}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"问答"},on:{click:function(e){t.channel("问答")}}},[n("mu-icon",{attrs:{value:"live_help"},slot:"left"})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"list",query:{tab:"job"}}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"招聘"},on:{click:function(e){t.channel("招聘")}}},[n("mu-icon",{attrs:{value:"local_mall"},slot:"left"})],1)],1),t._v(" "),n("mu-divider"),t._v(" "),n("router-link",{attrs:{to:{name:"about"}},nativeOn:{click:function(e){t.open=!1}}},[n("mu-list-item",{attrs:{title:"关于"},on:{click:function(e){t.channel("关于")}}},[n("mu-icon",{attrs:{value:"info"},slot:"left"})],1)],1)],2)],1)],1)},staticRenderFns:[]}},,,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"toTop",on:{click:t.toTop}},[n("mu-icon",{attrs:{value:"publish"}})],1)},staticRenderFns:[]}},,function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app demo-infinite-container"},[o("mhead",{attrs:{title:t.title}}),t._v(" "),t.success?o("section",{staticClass:"pt56 demo-refresh-container"},[o("mu-refresh-control",{attrs:{refreshing:t.refreshing,trigger:t.trigger},on:{refresh:t.refresh}}),t._v(" "),o("mu-list",[t._l(t.topics,function(e){return[o("router-link",{attrs:{to:{name:"topic",params:{id:e.id}}}},[o("mu-list-item",[o("div",{staticClass:"title",attrs:{title:t.getTabInfo(e.tab,e.good,e.top,!0)},domProps:{innerHTML:t._s(e.title)}}),t._v(" "),o("mu-flexbox",{staticClass:"content"},[o("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[o("mu-avatar",{attrs:{src:e.author.avatar_url}})],1),t._v(" "),o("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"7"}},[o("mu-flexbox",[o("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[t._v("\n\t\t\t\t\t                      \t"+t._s(e.author.loginname)+"\n\t\t\t\t\t                    ")]),t._v(" "),o("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[o("span",{staticClass:"blue"},[t._v(t._s(e.reply_count))]),t._v("/"),o("span",{staticClass:"grey"},[t._v(t._s(e.visit_count))])])],1),t._v(" "),o("mu-flexbox",[o("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[t._v("\n\t\t\t\t\t                      \t"+t._s(t._f("getTimeStr")(e.create_at))+"\n\t\t\t\t\t                    ")]),t._v(" "),o("mu-flexbox-item",{staticClass:"flex-demo",attrs:{grow:"1"}},[t._v("\n\t\t\t\t\t                      \t"+t._s(t._f("getTimeStr")(e.last_reply_at))+"\n\t\t\t\t\t                    ")])],1)],1)],1)],1)],1),t._v(" "),o("mu-divider")]})],2),t._v(" "),o("mu-infinite-scroll",{attrs:{scroller:t.scroller,loading:t.loading},on:{load:t.loadMore}}),t._v(" "),o("totop",{attrs:{page:"list"}})],1):t._e(),t._v(" "),t.success?t._e():o("div",{staticClass:"error"},[o("img",{attrs:{src:n(6),alt:""}})])],1)},staticRenderFns:[]}},,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={replace:!0,name:"hello",props:["theme"],data:function(){return{open:!1,docked:!0,title:"全部",userInfo:{}}},mounted:function(){this.$store.state.user.userInfo&&(this.userInfo=this.$store.state.user.userInfo)},methods:{toggle:function(t){this.open=!this.open,this.docked=!t},channel:function(t){this.title=t},loginOut:function(){this.docked=!1,window.window.sessionStorage.removeItem("user"),window.window.sessionStorage.removeItem("info"),setTimeout(function(){history.go(0)},200)}}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=o(i);e.default={name:"toTop",props:["page"],components:{},filters:{},data:function(){return{show:!1,target:null}},mounted:function(){var t=this;"list"==this.page?this.target=".demo-infinite-container":this.target=window,(0,s.default)(this.target).on("scroll",function(){(0,s.default)(t.target).scrollTop()>200?t.show=!0:t.show=!1})},methods:{toTop:function(){return(0,s.default)(this.target).scrollTop(0),this.show=!1,!1}},watch:{}}},,,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),s=o(i),a=n(1),r=o(a),u=n(5),l=n(4),c=o(l),f=n(9),d=o(f);e.default={name:"app",components:{mhead:c.default,totop:d.default},filters:{getTimeStr:function(t){return(0,u.getTimeStr)(t)}},data:function(){return{title:"全部",num:20,loading:!1,scroller:null,success:!1,topics:[],searchKey:{page:1,limit:20,tab:"all",mdrender:!0},refreshing:!1,trigger:null}},mounted:function(){this.scroller=this.$el,this.trigger=this.$el,this.$route.query&&this.$route.query.tab&&(this.searchKey.tab=this.$route.query.tab),window.window.sessionStorage.searchKey&&window.window.sessionStorage.tab===this.searchKey.tab?(this.topics=JSON.parse(window.window.sessionStorage.topics),this.searchKey=JSON.parse(window.window.sessionStorage.searchKey),this.success=!0,this.$nextTick(function(){(0,r.default)(".demo-infinite-container").scrollTop(window.window.sessionStorage.scrollTop)})):this.getTopics()},beforeRouteLeave:function(t,e,n){"topic"===t.name&&(window.window.sessionStorage.scrollTop=(0,r.default)(".demo-infinite-container").scrollTop(),window.window.sessionStorage.topics=(0,s.default)(this.topics),window.window.sessionStorage.searchKey=(0,s.default)(this.searchKey),window.window.sessionStorage.tab=e.query.tab||"all"),(0,r.default)(window).off("scroll"),n()},beforeRouteEnter:function(t,e,n){"topic"!==e.name&&window.window.sessionStorage.tab&&(window.window.sessionStorage.removeItem("topics"),window.window.sessionStorage.removeItem("searchKey"),window.window.sessionStorage.removeItem("tab")),n()},methods:{loadMore:function(){var t=this;this.loading=!0,setTimeout(function(){t.searchKey.limit+=20,t.getTopics(),t.loading=!1},2e3)},getTopics:function(){var t=this;r.default.get("https://cnodejs.org/api/v1/topics?"+r.default.param(this.searchKey),function(e){t.topics=e.data,t.success=!0})},getTabInfo:function(t,e,n,o){return(0,u.getTabInfo)(t,e,n,o)},refresh:function(){var t=this;this.refreshing=!0,setTimeout(function(){t.getTopics(),t.refreshing=!1},2e3)}},watch:{$route:function(t,e){this.success=!1,this.searchKey.tab=t.query.tab,this.searchKey.limit=20,this.getTopics()}}}},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){!function(){t(n(7))}(n)},i=function(t){n.e(0,function(){t(n(15))})},s=function(t){n.e(2,function(){t(n(14))})},a=function(t){n.e(3,function(){t(n(11))})},r=function(t){n.e(6,function(){t(n(16))})},u=function(t){n.e(5,function(){t(n(13))})},l=[{path:"/",name:"list",component:o},{path:"/topic/:id",name:"topic",component:i},{path:"/add",name:"add",component:a,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:s},{path:"/user/:loginname",name:"user",component:r},{path:"/info",name:"info",component:u},{path:"/about",name:"about",component:function(t){n.e(1,function(){t(n(10))})}},{path:"/collection",name:"collection",component:function(t){n.e(4,function(){t(n(12))})}}];e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={state:{notiNum:null},getters:{getNotiNum:function(t){return t.notiNum}},mutations:{setNotiNum:function(t,e){t.notiNum=e}},actions:{setNotiNum:function(t,e){var n=t.commit;n("setNotiNum",e)}}};e.default=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),s=o(i),a=n(74),r=o(a),u=n(67),l=o(u),c=n(65),f=o(c);s.default.use(r.default);var d=new r.default.Store({modules:{user:l.default,info:f.default}});e.default=d},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={state:{userInfo:{}},getters:{getUserInfo:function(t){return t.userInfo}},mutations:{setUserInfo:function(t,e){t.userInfo=e}},actions:{setUserInfo:function(t,e){var n=t.commit;n("setUserInfo",e)}}};e.default=n}]);
//# sourceMappingURL=app.18cca70130729e8924e1.js.map