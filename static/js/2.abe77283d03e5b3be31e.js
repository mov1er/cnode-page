webpackJsonp([2,7],{14:function(e,t,s){var n,a;s(38),n=s(61);var o=s(49);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),"undefined"==typeof a.name&&(a.name="login"),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-fbedb98e",e.exports=n},27:function(e,t,s){t=e.exports=s(2)(),t.push([e.id,".content[data-v-fbedb98e]{padding:180px 10px 20px}.login .loading[data-v-fbedb98e]{width:100vw;height:100vh;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:absolute;top:0;left:0;background:rgba(0,0,0,.2)}","",{version:3,sources:["/./src/views/login.vue"],names:[],mappings:"AACA,0BACC,uBAAwB,CACxB,AACD,iCACC,YAAa,AACb,aAAc,AACZ,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AAClB,uBAAwB,AAC5B,sBAAuB,AACnB,mBAAoB,AACxB,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,yBAA0B,CAC5B",file:"login.vue",sourcesContent:["\n.content[data-v-fbedb98e]{\n\tpadding:180px 10px 20px;\n}\n.login .loading[data-v-fbedb98e]{\n\twidth: 100vw;\n\theight: 100vh;\n  \tdisplay: -ms-flexbox;\n  \tdisplay: flex;\n  \t-ms-flex-pack: center;\n  \t    justify-content: center;\n  \t-ms-flex-align: center;\n  \t    align-items: center;\n  \tposition: absolute;\n  \ttop: 0;\n  \tleft: 0;\n  \tbackground: rgba(0,0,0,.2)\n}\n\n"],sourceRoot:"webpack://"}])},38:function(e,t,s){var n=s(27);"string"==typeof n&&(n=[[e.id,n,""]]);s(3)(n,{});n.locals&&(e.exports=n.locals)},49:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("mu-appbar",{attrs:{title:"登陆"}}),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"model"},[s("mu-text-field",{directives:[{name:"model",rawName:"v-model",value:e.accesstoken,expression:"accesstoken"}],attrs:{label:"Access Token",errorText:e.errorText,fullWidth:"",labelFloat:""},domProps:{value:e.accesstoken},on:{input:[function(t){e.accesstoken=t},e.setErrorText]}}),e._v(" "),s("mu-raised-button",{attrs:{label:"确认",disabled:e.disabled,fullWidth:"",primary:""},on:{click:e.login}}),e._v(" "),s("mu-dialog",{attrs:{open:e.dialog,title:"提示"}},[e._v("\n\t\t\t\t    "+e._s(e.alert)+"\n\t\t\t\t    "),s("mu-flat-button",{attrs:{label:"确定",primary:""},on:{click:e.close},slot:"actions"})],1)],1)]),e._v(" "),e.success?s("div",{staticClass:"loading"},[s("mu-circular-progress",{attrs:{size:40}})],1):e._e(),e._v(" "),e.toast?s("mu-snackbar",{attrs:{message:e.successTxt}}):e._e()],1)},staticRenderFns:[]}},61:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=s(17),o=n(a),i=s(1),r=n(i);t.default={name:"login",components:{},filters:{},data:function(){return{accesstoken:"",dialog:!1,alert:"",errorText:"",disabled:!0,success:!1,successTxt:"",toast:!1}},mounted:function(){},methods:{login:function(){var e=this;this.success=!0,r.default.ajax({type:"POST",url:"https://cnodejs.org/api/v1/accesstoken",data:{accesstoken:this.accesstoken},dataType:"json",success:function(t){var s={loginname:t.loginname,avatar_url:t.avatar_url,userId:t.id,token:e.accesstoken},n=0;r.default.get("https://cnodejs.org/api/v1/messages?accesstoken="+e.accesstoken,function(t){t&&t.data&&(n=t.data.hasnot_read_messages.length,e.success=!1,e.toast=!0,e.successTxt="登陆成功，即将跳转",e.toastTimer&&clearTimeout(e.toastTimer),e.toastTimer=setTimeout(function(){e.toast=!1,window.window.sessionStorage.user=(0,o.default)(s),window.window.sessionStorage.info=n,e.$store.dispatch("setUserInfo",s),e.$store.dispatch("setNotiNum",n);var t=decodeURIComponent(e.$route.query.redirect||"/");e.$router.push({path:t})},2e3))})},error:function t(s){var t=JSON.parse(s.responseText);e.alert=t.error_msg,e.dialog=!0}})},close:function(){this.dialog=!1},setErrorText:function(){36==this.accesstoken.length?(this.errorText="",this.disabled=!1):this.errorText="Access Token应为36位的字符串！"}},watch:{}}}});
//# sourceMappingURL=2.abe77283d03e5b3be31e.js.map