webpackJsonp([3,8],{16:function(t,e,s){var a,o;s(41),a=s(66);var n=s(53);o=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(o=a=a.default),"function"==typeof o&&(o=o.options),"undefined"==typeof o.name&&(o.name="login"),o.render=n.render,o.staticRenderFns=n.staticRenderFns,t.exports=a},30:function(t,e,s){e=t.exports=s(1)(),e.push([t.id,".login .loading{width:100vw;height:100vh;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:absolute;top:0;left:0;background:rgba(0,0,0,.2)}.login .content{padding:180px 10px 20px}.login .mu-appbar-title{text-align:center}",""])},41:function(t,e,s){var a=s(30);"string"==typeof a&&(a=[[t.id,a,""]]);s(2)(a,{});a.locals&&(t.exports=a.locals)},53:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("mu-appbar",{attrs:{title:"登陆"}}),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"model"},[s("mu-text-field",{directives:[{name:"model",rawName:"v-model",value:t.accesstoken,expression:"accesstoken"}],attrs:{label:"Access Token",errorText:t.errorText,fullWidth:"",labelFloat:""},domProps:{value:t.accesstoken},on:{input:[function(e){t.accesstoken=e},t.setErrorText]}}),t._v(" "),s("mu-raised-button",{attrs:{label:"确认",disabled:t.disabled,fullWidth:"",primary:""},on:{click:t.login}}),t._v(" "),s("mu-dialog",{attrs:{open:t.dialog,title:"提示"}},[t._v("\n\t\t\t\t    "+t._s(t.alert)+"\n\t\t\t\t    "),s("mu-flat-button",{attrs:{label:"确定",primary:""},on:{click:t.close},slot:"actions"})],1)],1)]),t._v(" "),t.success?s("div",{staticClass:"loading"},[s("mu-circular-progress",{attrs:{size:40}})],1):t._e(),t._v(" "),t.toast?s("mu-snackbar",{attrs:{message:t.successTxt}}):t._e()],1)},staticRenderFns:[]}},66:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=s(19),n=a(o),r=s(3),i=a(r);e.default={name:"login",components:{},filters:{},data:function(){return{accesstoken:"",dialog:!1,alert:"",errorText:"",disabled:!0,success:!1,successTxt:"",toast:!1}},mounted:function(){},methods:{login:function(){var t=this;this.success=!0,i.default.ajax({type:"POST",url:"https://cnodejs.org/api/v1/accesstoken",data:{accesstoken:this.accesstoken},dataType:"json",success:function(e){var s={loginname:e.loginname,avatar_url:e.avatar_url,userId:e.id,token:t.accesstoken},a=0;i.default.get("https://cnodejs.org/api/v1/messages?accesstoken="+t.accesstoken,function(e){e&&e.data&&(a=e.data.hasnot_read_messages.length,t.success=!1,t.toast=!0,t.successTxt="登陆成功，即将跳转",t.toastTimer&&clearTimeout(t.toastTimer),t.toastTimer=setTimeout(function(){t.toast=!1,window.window.sessionStorage.user=(0,n.default)(s),window.window.sessionStorage.info=a,t.$store.dispatch("setUserInfo",s),t.$store.dispatch("setNotiNum",a);var e=decodeURIComponent(t.$route.query.redirect||"/list");t.$router.push({path:e})},2e3))})},error:function e(s){var e=JSON.parse(s.responseText);t.alert=e.error_msg,t.dialog=!0}})},close:function(){this.dialog=!1},setErrorText:function(){36==this.accesstoken.length?(this.errorText="",this.disabled=!1):this.errorText="Access Token应为36位的字符串！"}},watch:{}}}});